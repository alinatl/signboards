<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Бишкек • Вывески | Архив</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Импорт шрифтов */
        @font-face {
          font-family: 'SovietStyleCyrilic';
          src: url('fonts/SovietStyleCyrilic-Regular.woff') format('woff');
          font-display: swap;
        }

        :root {
            --header-height: 64px; /* Высота основного хедера */
            --accent-red: #e63946;
            --glass-bg: rgba(255, 255, 255, 0.8);
            --glass-border: rgba(0, 0, 0, 0.05);
        }

        body { font-family: 'Inter', sans-serif; background-color: #fcfcfc; margin: 0; }

        body::before {
          content: "";
          position: fixed;
          inset: 0;
          background: url("images_compress/background.webp") center / cover no-repeat;
          opacity: 0.15;
          z-index: -1;
          pointer-events: none;
        }

        /* ===== ОСНОВНОЙ ХЕДЕР ===== */
        header#nav {
          position: fixed;
          top: 0; left: 0; right: 0;
          height: var(--header-height);
          backdrop-filter: blur(20px);
          -webkit-backdrop-filter: blur(20px);
          background: var(--glass-bg);
          border-bottom: 1px solid var(--glass-border);
          z-index: 1000;
          display: flex;
          align-items: center;
        }

        .header-inner {
          width: 100%;
          max-width: 1400px;
          margin: 0 auto;
          padding: 0 1.5rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .logo {
          font-family: 'SovietStyleCyrilic', sans-serif;
          font-size: clamp(1.2rem, 3vw, 1.6rem);
          color: var(--accent-red);
          text-transform: uppercase;
          letter-spacing: 2px;
          text-decoration: none;
        }

        /* БУРГЕР */
        .burger {
            display: flex;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 1100;
        }
        .burger span {
            display: block;
            width: 25px;
            height: 2px;
            background: #000;
            transition: 0.3s;
        }

        /* МОБИЛЬНОЕ МЕНЮ */
        .menu {
            position: fixed;
            top: 0; right: -100%;
            width: 80%; height: 100vh;
            background: white;
            display: flex;
            flex-direction: column;
            padding: 80px 40px;
            gap: 20px;
            transition: 0.4s;
            box-shadow: -10px 0 30px rgba(0,0,0,0.1);
            z-index: 1050;
        }
        .menu.active { right: 0; }
        .menu a { font-size: 1.5rem; font-weight: 700; text-decoration: none; color: #000; }

        /* ===== АЛФАВИТНАЯ НАВИГАЦИЯ ===== */
        .alphabet-sticky {
            position: sticky;
            top: var(--header-height); /* Липнет СРАЗУ ПОД основным хедером */
            z-index: 900;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--glass-border);
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .outline-text {
            color: transparent;
            -webkit-text-stroke: 1px #e5e7eb;
            font-size: clamp(8rem, 15vw, 12rem);
        }

        /* Отступ при скролле (Header 64px + Alphabet ~50px = 114px) */
        section { scroll-margin-top: 120px; }

        .active-letter {
            color: var(--accent-red);
            border-bottom: 2px solid var(--accent-red);
        }

        .object-link {
            height: 56px;
            display: flex;
            align-items: center;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: all 0.3s;
        }
        .object-link:hover { padding-left: 10px; border-color: #000; }
    </style>
</head>
<body class="text-gray-900 antialiased">

<!-- Основной Хедер -->
<header id="nav">
  <div class="header-inner">
    <a href="../index.html" class="logo">Бишкек • Вывески</a>
    <button class="burger" id="burgerBtn">
      <span></span><span></span><span></span>
    </button>
    <nav class="menu" id="mobileMenu">
      <a href="signboards/index.html">Вывески</a>
      <a href="mosaics/index.html">Мозаики</a>
      <a href="archive.html">Архив</a>
      <a href="index.html">О проекте</a>
    </nav>
  </div>
</header>

<!-- Алфавитный указатель (Sticky) -->
<nav class="alphabet-sticky">
    <div class="max-w-7xl mx-auto px-4">
        <div id="alphabet-nav" class="flex gap-6 overflow-x-auto py-4 no-scrollbar text-sm font-bold text-gray-400 uppercase tracking-widest">
            <!-- Буквы через JS -->
        </div>
    </div>
</nav>

<main class="max-w-7xl mx-auto px-4 pt-16 pb-24">
    <header class="mb-20 mt-10">
        <h1 class="text-5xl md:text-8xl font-black tracking-tighter uppercase mb-4 leading-none">Архив<br>Объектов</h1>
        <p class="text-gray-500 max-w-md italic">Полный каталог городских артефактов Бишкека в алфавитном порядке.</p>
    </header>

    <div id="archive-content">
        <!-- Списки через JS -->
    </div>
</main>

<script>
    // 1. Логика Бургера
    const burgerBtn = document.getElementById('burgerBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    burgerBtn.addEventListener('click', () => {
        mobileMenu.classList.toggle('active');
        const spans = burgerBtn.querySelectorAll('span');
        spans[0].style.transform = mobileMenu.classList.contains('active') ? 'rotate(45deg) translate(5px, 5px)' : 'none';
        spans[1].style.opacity = mobileMenu.classList.contains('active') ? '0' : '1';
        spans[2].style.transform = mobileMenu.classList.contains('active') ? 'rotate(-45deg) translate(5px, -5px)' : 'none';
    });

    // 2. ВАШИ ДАННЫЕ (как в pages.json)
    const pages = {
      "signboards/index.html": "Киевская 155",
      "signboards/1.html": "Салон Ай-Пери",
      "signboards/2.html": "ЦУМ. Айчүрөк",
      "signboards/3.html": "Байчечекей",
      "signboards/4.html": "Гос банк СССР",
      "signboards/5.html": "Дежурная аптека. 5 МКРН",
      "signboards/6.html": "Перекресток Абдрахманова / Боконбаева",
      "signboards/7.html": "Дом Союзов",
      "signboards/8.html": "Дом геологов на Байтик Баатыра 124",
      "signboards/9.html": "ДСК",
      "signboards/10.html": "Илбирс",
      "signboards/11.html": "Кинотеатр Манас",
      "signboards/12.html": "Музей Фрунзе",
      "signboards/13.html": "Театр драмы и сатиры (Бывший кинотеатр Октябрь)",
      "signboards/14.html": "Кинотеатр Россия",
      "signboards/15.html": "Государственная Трудовая Сберегательная Касса",
      "signboards/16.html": "Сберкасса",
      "signboards/17.html": "Светоч",
      "signboards/18.html": "Слава советскому ...",
      "signboards/19.html": "Театр Тунгуч",
      "signboards/20.html": "Центральный",
      "signboards/21.html": "Цирк",
      "signboards/22.html": "Планетарий",
      "signboards/23.html": "Продовольственный",
      "signboards/24.html": "Западный автовокзал",
      "signboards/25.html": "Мебель",
      "signboards/26.html": "Устаревшие названия улиц",
      "signboards/27.html": "Пожарная станция",
      "signboards/28.html": "Павильон Ак-Суу (Соки-Воды)"
    };

    // 3. Преобразуем объект в массив и сортируем по названию (второй, Киевская, первый...)
    const artObjects = Object.entries(pages).map(([url, name]) => ({
        url: url,
        name: name
    }));

    // Сортировка по алфавиту без учета регистра
    artObjects.sort((a, b) => a.name.localeCompare(b.name, 'ru', { sensitivity: 'base' }));

    const archiveContent = document.getElementById('archive-content');
    const alphabetNav = document.getElementById('alphabet-nav');

    // 4. Группировка по первой букве названия
    const grouped = artObjects.reduce((acc, obj) => {
        const letter = obj.name[0].toUpperCase();
        if (!acc[letter]) acc[letter] = [];
        acc[letter].push(obj);
        return acc;
    }, {});

    const sortedLetters = Object.keys(grouped).sort();

    // 5. Генерация навигации и контента
    sortedLetters.forEach(letter => {
        const navBtn = document.createElement('a');
        navBtn.href = `#letter-${letter}`;
        navBtn.innerText = letter;
        navBtn.className = "hover:text-black transition-colors duration-300 flex-shrink-0 cursor-pointer py-1";
        navBtn.onclick = (e) => {
            e.preventDefault();
            const target = document.getElementById(`letter-${letter}`);
            window.scrollTo({ top: target.offsetTop - 110, behavior: 'smooth' });
            mobileMenu.classList.remove('active');
        };
        alphabetNav.appendChild(navBtn);

        const section = document.createElement('section');
        section.id = `letter-${letter}`;
        section.className = "relative border-t border-gray-100 pt-20 pb-10 overflow-hidden";
        section.innerHTML = `
            <div class="absolute -top-4 -left-4 select-none z-0">
                <span class="outline-text font-black leading-none opacity-20 uppercase">${letter}</span>
            </div>
            <div class="relative z-10">
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-8">
                    ${grouped[letter].map(item => `
                        <a href="${item.url}" class="object-link group">
                            <span class="text-2xl md:text-1xl tracking-tight">${item.name}</span>
                        </a>
                    `).join('')}
                </div>
            </div>
        `;
        archiveContent.appendChild(section);
    });

    // 6. Подсветка активной буквы при скролле
    window.addEventListener('scroll', () => {
        let current = "";
        const sections = document.querySelectorAll('section');
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (window.pageYOffset >= sectionTop - 130) {
                current = section.getAttribute('id');
            }
        });

        document.querySelectorAll('#alphabet-nav a').forEach(item => {
            item.classList.remove('active-letter');
            if (item.getAttribute('href') === `#${current}`) {
                item.classList.add('active-letter');
                item.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
            }
        });
    });
</script>

</body>
</html>